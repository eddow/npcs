// Test deep nested state restoration
myFunc = function(x)
    print "Function called with: " + x
    if x > 3 then
        print "x is greater than 3"
        yield()
        print "After pause in if: x = " + x
    else
        print "x is not greater than 3"
    end if
    return x * 2
end function

x = 5
print "Before calling function: x = " + x
result = myFunc(x)
print "Function result: " + result
print "Final x value: " + x
